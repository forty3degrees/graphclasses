package teo.isgci.core;

import java.util.HashMap;
import java.util.Map;

import teo.isgci.data.XmlDataProvider;
import teo.isgci.view.gui.ISGCIMainFrame;
import teo.isgci.yfiles.YFilesDrawingService;

public class App {
	
	public static final IDataProvider DataProvider;
	private static final Map<ISGCIMainFrame, IDrawingService> drawingServices;
	private static final Map<ISGCIMainFrame, ViewManager> viewManagers;
	
	static  {
		App.DataProvider = new XmlDataProvider();
		App.viewManagers = new HashMap<ISGCIMainFrame, ViewManager>();
		App.drawingServices = new HashMap<ISGCIMainFrame, IDrawingService>();
	}
	
	private static void createServices(ISGCIMainFrame parent) {

		ViewManager viewManager = new ViewManager();
		IDrawingService drawingService = new YFilesDrawingService();
		viewManager.attachDrawingService(drawingService);

		App.viewManagers.put(parent, viewManager);
		App.drawingServices.put(parent, drawingService);
	}
	
	public static IDrawingService getDrawingService(ISGCIMainFrame parent) {
		if (!App.drawingServices.containsKey(parent)) {
			createServices(parent);
		}
		return App.drawingServices.get(parent);
	}
	
	public static ViewManager getViewManager(ISGCIMainFrame parent) {
		if (App.viewManagers.containsKey(parent)) {
			createServices(parent);
		}
		return App.viewManagers.get(parent);
	}
	
}
